---
import Skeleton from "./Skeleton.astro";
import { z } from "astro:content";

interface Frontmatter {
  title: string;
  description: string;
}

interface Props {
  frontmatter?: Frontmatter;
  title?: string;
  description?: string;
}

const schema = z.object({
  title: z.string(),
  description: z.string(),
});

const { title, description } = schema.parse(Astro.props.frontmatter ?? Astro.props);

const articleClasses = [
  "mx-auto",
  "max-w-5xl",
  "pt-8",
  "sm:pt-16",
  "pb-12",
  "sm:pb-16",
  "px-4",
  "sm:px-6",
  "prose",
  "prose-h1:text-4xl",
  "text-sm",
  "sm:text-sm",
  "leading-normal",
  "font-['Inter']",
  "font-normal",
  "text-neutral-300",
  "prose-headings:text-white",
  "prose-h1:mb-4",
  "prose-h2:text-3xl",
  "prose-h2:mt-10",
  "prose-h2:mb-4",
  "prose-h3:text-xl",
  "prose-h3:mt-8",
  "prose-h3:mb-2",
  "prose-h4:mt-3",
  "prose-h4:mb-1",
  "prose-strong:text-white",
  "prose-strong:font-bold",
  "prose-dt:text-white",
  "prose-dl:text-neutral-400",
  "prose-ol:marker:text-white",
  "prose-ul:marker:text-white",
  "[&_dt]:text-white",
  "prose-img:max-w-full",
  "prose-img:mx-auto",

  // Inline code
  "[&_:not(pre)>code]:bg-neutral-800",
  "[&_:not(pre)>code]:py-0.5",
  "[&_:not(pre)>code]:px-1",
  "[&_:not(pre)>code]:border",
  "[&_:not(pre)>code]:border-neutral-700",
  "[&_:not(pre)>code]:rounded-sm",
  "[&_:not(pre)>code]:text-neutral-400",
  "[&_:not(pre)>code]:text-xs",
  "[&_:not(pre)>code]:font-mono",
  "[&_:not(pre)>code]:break-words",
  "[&_:not(pre)>code]:whitespace-normal",
  "prose-code:font-normal",
  "[&_code]:before:content-['']",
  "[&_code]:after:content-['']",
  "[&_a>code]:text-green-300",
  "[&_a>code]:hover:text-green-200",
];
---

<Skeleton title={title} description={description}>
  <article class={articleClasses.join(" ")}>
    <slot />
  </article>
</Skeleton>
